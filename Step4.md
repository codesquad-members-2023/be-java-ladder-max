# Step 4. 사다리 구현 4단계 - 리팩토링 2
## 미션 구현
- [x] step3 피드백 받을 것을 토대로 수정
  - 싹다 상수
  - StringBuilder 마지막에 substring으로 마지막 공백 제거
- [x] 단위테스트 추가하기(UI 처리 로직 제외)
  - Ladder
    - 선을 그릴수 있는지 여부를 판단하는 로직에 대한 단위 테스트
  - validation
    - 이름을 문자열로 입력
    - 이름이 문자열이 아니면 에러
    - 이름 길이가 5를 넘으면 에러
    - 사다리 개수 입력하기
    - 사다리 개수가 양수가 아니면 에러
    - 사다리 개수가 정수가 아니면 에러
  - Encoding
    - List<List<>> 형식의 사다리가 제대로 String 으로 변환됐는지 확인
- [x] Line 클래스 생성
  - isLine() 
  - Ladder에서 호출
  - 이전 라인의 좌표 값에 선이 있는지 유무를 판단하는 로직
  

## 고민한 부분
### 외부에 노출하고 싶은 메서드만 public으로 했는데 테스트를 위해 private 메서드를 public으로 바꿔야 할까?
선을 그릴수 있는지 여부를 판단하는 로직은 현재 private으로 되어있는데 이것을 테스트하기 위해 public으로 열려있는 makeLadder에서 검사를 해야 하는지    
또는 이 로직을 private 에서 public으로 변환해서 이것만 테스트 해야하는지 고민이 들었다.    
단순히 테스트를 위해 접근제어자를 변경하는 것은 그다지 좋은 선택이 아닌 것 같아 makeLadder를 사용해서 테스트를 해야 할 것 같다.   
근데! 이러면 테스트를 못 한다. 너무나 당연하게 makeLadder 내부를 뜯어볼 수 없기 때문이다. 나는 이전에 선이 있을 때 현재 선이 없게 적용이 되는지 확인하고 싶은건데 그것을 확인할 방법이 없다.     
사다리의 모양은 랜덤하게 만들어지기 때문이다. 리팩토링을 할 수밖에 없는 것 같다. 한 라인의 좌표값을 가지는 Line 객체를 추가한다.    
이 Line 클래스에 isLine이라는 메서드를 만들어 라인의 이전 좌표값에 선이 있는지 유무를 판단하게 하고 이 메서드를 Ladder에서 호출하게 만들었다.    
public으로 만든 메서드이기 때문에 테스트가 가능해졌으나 약간 테스트를 위해 클래스를 분리한 것 같은 찜찜한 마음이 들었다.


## 팀원 피드백
### 차차
Input이나 Output은 static으로 선언하는게 test 하기 편하다!    
변수명 m으로 받은거 수정해라!(변수 잘못 적혀있으면 스택오버플로우 블록당함)

### 지구
요구사항 자체가 중첩 리스트에서 클래스를 분리하는 김에 단위 테스트를 해봐!라는 의도인 것 같다.    
단위 테스트를 위해 클래스를 분리하는 것은 아니다.

### 준
코테 코드는 면접에서도 보니까 예쁘게 짜는게 좋을듯


