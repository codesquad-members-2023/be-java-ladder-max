## 2주차 학습 계획

---

1. 사다리 리펙토링
  - 일급 컬렉션 적용 (https://jojoldu.tistory.com/412)
2. 5단계 구현(+ 게임 반복 기능)
3. ~~TDD 학습, 적용~~  
4. 오브젝트 관심(?)


### 3.13(월)

---

일급 컬렉션을 학습하고 Ladder, LadderLine 클래스가 List를 전달 받아 단일 필드를 가지도록 수정했습니다. 이전에는 플레이어 수, 사다리 높이 값을 전달 받아서 생성자 내부에서 private 메서드로 List를 초기화 했는데 다음과 같은 문제가 있었습니다.  
  
- 만약 LadderLine이 인터페이스고 구현체를 변경해야 한다면 Ladder 클래스 내부에서 코드를 수정해야 합니다.  
- Random 함수를 제어하기 위해 Mockito, Random 인터페이스 생성자 주입, 리플렉션 등의 방법을 써야 합니다.  
    
반면 List를 외부에서 생성하고 파라미터로 전달하는 경우에는 위와 같은 문제점이 발생하지 않습니다. LadderLine 구현체가 바뀌더라도 외부에서 교체해서 주입하면 되고 Random 함수도 테스트용 List를 만들면 되니까 조작할 필요가 없었습니다.  

<br>

### 3.14(화)

---

**학습 계획**

입력값에 대한 예외 처리, 반복 입력 등의 구조를 리펙토링할 계획입니다. 지금은 비슷한 형태의 중복되는 코드가 많아서 비효율적인 것 같습니다. 그리고 오 
5단계를 끝내고 테스트 코드까지 작성하는 것이 목표입니다.

**학습**

~~5단계에서는 사다리 결과 입력을 추가하고 계속해서 플레이어 이름을 입력 받아서 사다리 결과를 받아오기 때문에 LadderGame 인스턴스가 살아있어야 합니다. 
기존에는 하나의 LadderGame 인스턴스에서 입력을 받을때마다 사다리를 생성하고 결과를 반환하는 방식으로 구현하려고 했지만 
LadderGame이 Ladder, Player의 정보를 가지고 있어야 하기 때문에 Ladder, Player 같은 필드를 final로 선언하고 
Controller에서 새로운 게임마다 LadderGame을 생성하도록 하는 것이 좋을 것 같습니다.~~

-> LadderGame을 Controler 내부에서 인스턴스로 계속 생성하면 내부에서 new 생성자로 생성을 하기 때문에 결합력이 높아지고 유연하지 DIP도 깨지게 될 것 같습니다. 
그래서 LadderGame을 필드 변수로 주입 받고 InputDto를 전달해서 GameResultDto를 전달 받도록 해야될 것 같습니다.  

예외 처리는 Controller에서 LadderGame으로 Dto를 전달하면 LadderGame에서 Domain 객체를 생성하면서 예외 발생 시 throw를 합니다. 
그러면 Controller는 예외를 try-catch하고 다시 Dto를 전달하도록 하고 싶은데 이렇게 하면 처음부터 다시 입력을 받아야 하는 것이 문제입니다.